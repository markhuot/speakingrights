{% set perPage = 12 %}
{% set order = craft.request.getParam('sort') == 'date' ? 'postDate' : 'title' %}
{% set direction = craft.request.getParam('direction') == 'desc' ? 'desc' : 'asc' %}
{% set entries = craft.entries.section('downloads').order(order ~ ' ' ~ direction).limit(perPage) %}
{% if not currentUser %}
    {% set entries = entries.requireLogin('not 1') %}
{% endif %}
{% paginate entries as pageInfo, downloads %}

{% include "components/downloadList" with {"items": downloads} only %}
{% include "components/pagination" with {"pageInfo": pageInfo} only %}